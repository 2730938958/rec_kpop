<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPOP music recommendation assistant</title>
    <link rel="icon" href="音乐.png" type="image/png">
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 配置Tailwind自定义主题 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#ff3e6c', // K-Pop风格主色调：亮粉色
                        secondary: '#7209b7', // 辅助色：深紫色
                        dark: '#0f0a1f', // 深色背景
                        light: '#f8f0ff', // 浅色文本
                        'neutral-dark': '#1e1438', // 中性深色
                        'neutral-light': '#f0e6ff', // 中性浅色
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'glow': '0 0 15px rgba(255, 62, 108, 0.5)',
                        'glow-hover': '0 0 20px rgba(255, 62, 108, 0.8)',
                    }
                },
            }
        }
    </script>
    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            }
            .bg-gradient-overlay {
                background: linear-gradient(to bottom, 
                    rgba(15, 10, 31, 0.4), 
                    rgba(15, 10, 31, 0.7) 30%, 
                    rgba(15, 10, 31, 0.9) 60%, 
                    rgba(15, 10, 31, 1) 100%);
            }
        }
    </style>
</head>
<body class="bg-dark text-light min-h-screen font-sans overflow-x-hidden">
    <!-- 视频背景 -->
    <div class="fixed inset-0 z-0">
        <!-- 使用YouTube嵌入的KPOP视频作为背景 -->
        <div class="absolute inset-0 w-full h-full overflow-hidden">
            <img 
    class="absolute min-w-full min-h-full object-cover opacity-80"
    src="https://koreanindo.net/wp-content/uploads/2024/01/GIDLE-3.jpeg"
    alt="(G)I-DLE 相关图片"
    title="(G)I-DLE 图片"
    
    onError="this.src='https://via.placeholder.com/1920x1080?text=图片加载失败，请稍后重试'; this.alt='图片加载失败，请稍后重试'"
/>

        </div>
        
        <!-- 渐变遮罩，使视频逐渐消失在前景之下 -->
        <div class="absolute inset-0 bg-gradient-overlay z-10"></div>
    </div>

    <!-- 顶部导航栏 -->
    <header class="relative bg-neutral-dark/40 backdrop-blur-md border-b border-primary/20 fixed top-0 left-0 right-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <div class="w-10 h-10 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center shadow-glow">
                    <i class="fa fa-music text-white text-xl"></i>
                </div>
                <h1 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">K-Pop Music Recommendation Assistant</h1>
            </div>
            <div class="flex items-center space-x-4">
                <button class="text-light/70 hover:text-light transition-colors duration-200">
                    <i class="fa fa-history text-lg"></i>
                </button>
                <button class="text-light/70 hover:text-light transition-colors duration-200">
                    <i class="fa fa-cog text-lg"></i>
                </button>
                <div class="w-9 h-9 rounded-full bg-primary/20 border border-primary/30 flex items-center justify-center cursor-pointer hover:bg-primary/30 transition-colors duration-200">
                    <span class="font-medium text-sm">User</span>
                </div>
            </div>
        </div>
    </header>

    <!-- 主聊天区域 -->
    <main class="relative container mx-auto pt-10 pb-24 px-4 md:px-6 flex flex-col md:flex-row gap-6 z-20">
        <!-- 聊天历史 -->
        <div class="w-full md:w-2/3 flex flex-col h-[calc(100vh-12rem)]">
            <div class="text-light/80 text-sm mb-4 flex items-center backdrop-blur-sm bg-neutral-dark/20 p-3 rounded-xl border border-primary/10">
                <i class="fa fa-info-circle mr-2 text-primary"></i>
                <span>Tell us your favorite K-Pop group, song style or mood, and we will recommend suitable music for you</span>
            </div>
            
            <div id="chat-messages" class="flex-1 overflow-y-auto scrollbar-hide space-y-6 pb-4">
                <!-- 欢迎消息 -->
                <div class="flex items-start space-x-3 animate-fade-in">
                    <div class="w-9 h-9 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 flex items-center justify-center shadow-glow">
                        <i class="fa fa-music text-white"></i>
                    </div>
                    <div class="bg-neutral-dark/70 backdrop-blur-sm rounded-2xl rounded-tl-none px-5 py-4 max-w-[80%] border border-primary/20">
                        <p class="mb-2">Hello! I'm your K-Pop music recommendation assistant. Whether you like BTS, BLACKPINK or other groups, I can recommend suitable songs for you.</p>
                        <p>You can try asking me like this:</p>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-light/80 text-sm">
                            <li>Recommend some groups similar to BTS</li>
                            <li>I want to listen to some K-Pop songs suitable for dancing</li>
                            <li>Do you have any recommendations for lyrical K-Pop ballads?</li>
                        </ul>
                    </div>
                </div>

                <!-- 用户消息示例 -->
                <div class="flex items-start justify-end space-x-3 animate-fade-in">
                    <div class="bg-primary/30 backdrop-blur-sm rounded-2xl rounded-tr-none px-5 py-4 max-w-[80%] border border-primary/40">
                        <p>I like BLACKPINK. Could you recommend some songs by girl groups with similar styles?</p>
                    </div>
                    <div class="w-9 h-9 rounded-full bg-neutral-dark/70 backdrop-blur-sm flex-shrink-0 flex items-center justify-center border border-primary/20">
                        <span class="font-medium text-sm">User</span>
                    </div>
                </div>

                <!-- AI回复示例 -->
                <div class="flex items-start space-x-3 animate-fade-in">
                    <div class="w-9 h-9 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 flex items-center justify-center shadow-glow">
                        <i class="fa fa-music text-white"></i>
                    </div>
                    <div class="bg-neutral-dark/70 backdrop-blur-sm rounded-2xl rounded-tl-none px-5 py-4 max-w-[80%] border border-primary/20">
                        <p class="mb-4">If you are a fan of BLACKPINK, you might also enjoy the following songs by the girl groups:</p>
                        
                        <!-- 音乐推荐列表 -->
                        <div class="space-y-4 mt-4">
                            <!-- 音乐卡片1 -->
                            <div class="bg-dark/60 backdrop-blur-sm rounded-xl p-3 border border-primary/10 hover:border-primary/40 transition-all duration-300 hover:shadow-glow/30 flex items-center gap-3 transform hover:-translate-y-1">
                                <img src="https://picsum.photos/seed/kpop1/80/80" alt="歌曲专辑封面" class="w-14 h-14 rounded-lg object-cover flex-shrink-0 border border-primary/20">
                                <div class="flex-1 min-w-0">
                                    <h4 class="font-semibold truncate">DUMDi DUMDi</h4>
                                    <p class="text-light/60 text-sm truncate">MAMAMOO</p>
                                    <div class="flex items-center mt-1 text-xs text-light/40">
                                        <span class="flex items-center"><i class="fa fa-bolt mr-1"></i> 128 BPM</span>
                                        <span class="mx-2">•</span>
                                        <span>K-Pop, Dance</span>
                                    </div>
                                </div>
                                <button class="w-10 h-10 rounded-full bg-primary/20 hover:bg-primary/50 flex items-center justify-center transition-colors duration-200">
                                    <i class="fa fa-play text-primary"></i>
                                </button>
                            </div>

                            <!-- 音乐卡片2 -->
                            <div class="bg-dark/60 backdrop-blur-sm rounded-xl p-3 border border-primary/10 hover:border-primary/40 transition-all duration-300 hover:shadow-glow/30 flex items-center gap-3 transform hover:-translate-y-1">
                                <img src="https://picsum.photos/seed/kpop2/80/80" alt="歌曲专辑封面" class="w-14 h-14 rounded-lg object-cover flex-shrink-0 border border-primary/20">
                                <div class="flex-1 min-w-0">
                                    <h4 class="font-semibold truncate">WANNABE</h4>
                                    <p class="text-light/60 text-sm truncate">ITZY</p>
                                    <div class="flex items-center mt-1 text-xs text-light/40">
                                        <span class="flex items-center"><i class="fa fa-bolt mr-1"></i> 130 BPM</span>
                                        <span class="mx-2">•</span>
                                        <span>K-Pop, Hip Hop</span>
                                    </div>
                                </div>
                                <button class="w-10 h-10 rounded-full bg-primary/20 hover:bg-primary/50 flex items-center justify-center transition-colors duration-200">
                                    <i class="fa fa-play text-primary"></i>
                                </button>
                            </div>

                            <!-- 音乐卡片3 -->
                            <div class="bg-dark/60 backdrop-blur-sm rounded-xl p-3 border border-primary/10 hover:border-primary/40 transition-all duration-300 hover:shadow-glow/30 flex items-center gap-3 transform hover:-translate-y-1">
                                <img src="https://picsum.photos/seed/kpop3/80/80" alt="歌曲专辑封面" class="w-14 h-14 rounded-lg object-cover flex-shrink-0 border border-primary/20">
                                <div class="flex-1 min-w-0">
                                    <h4 class="font-semibold truncate">How You Like That</h4>
                                    <p class="text-light/60 text-sm truncate">BLACKPINK</p>
                                    <div class="flex items-center mt-1 text-xs text-light/40">
                                        <span class="flex items-center"><i class="fa fa-bolt mr-1"></i> 129 BPM</span>
                                        <span class="mx-2">•</span>
                                        <span>K-Pop, EDM</span>
                                    </div>
                                </div>
                                <button class="w-10 h-10 rounded-full bg-primary/20 hover:bg-primary/50 flex items-center justify-center transition-colors duration-200">
                                    <i class="fa fa-play text-primary"></i>
                                </button>
                            </div>
                        </div>

                        <p class="mt-4 text-light/70">Do you need more recommendations or K-Pop music of other styles?</p>
                    </div>
                </div>

                <!-- 用户消息示例2 -->
                <div class="flex items-start justify-end space-x-3 animate-fade-in">
                    <div class="bg-primary/30 backdrop-blur-sm rounded-2xl rounded-tr-none px-5 py-4 max-w-[80%] border border-primary/40">
                        <p>Yes. Could you recommend some popular male group songs recently?</p>
                    </div>
                    <div class="w-9 h-9 rounded-full bg-neutral-dark/70 backdrop-blur-sm flex-shrink-0 flex items-center justify-center border border-primary/20">
                        <span class="font-medium text-sm">User</span>
                    </div>
                </div>

                <!-- AI回复示例2 (加载状态) -->
                <div class="flex items-start space-x-3 animate-fade-in">
                    <div class="w-9 h-9 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 flex items-center justify-center shadow-glow">
                        <i class="fa fa-music text-white"></i>
                    </div>
                    <div class="bg-neutral-dark/70 backdrop-blur-sm rounded-2xl rounded-tl-none px-5 py-4 max-w-[80%] border border-primary/20">
                        <div class="flex space-x-2">
                            <div class="w-3 h-3 bg-primary rounded-full animate-bounce [animation-delay:-0.3s]"></div>
                            <div class="w-3 h-3 bg-primary rounded-full animate-bounce [animation-delay:-0.15s]"></div>
                            <div class="w-3 h-3 bg-primary rounded-full animate-bounce"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 侧边栏：推荐播放列表 -->
        <div class="w-full md:w-1/3 hidden md:block">
            <div class="bg-neutral-dark/60 backdrop-blur-sm rounded-2xl border border-primary/20 h-[calc(100vh-12rem)] flex flex-col">
                <div class="p-4 border-b border-primary/20">
                    <h2 class="text-lg font-semibold">Popular K-Pop playlists</h2>
                </div>
                
                <div class="flex-1 overflow-y-auto scrollbar-hide p-4 space-y-4">
                    <!-- 播放列表1 -->
                    <div class="rounded-xl overflow-hidden bg-dark/60 backdrop-blur-sm border border-primary/10 hover:border-primary/40 transition-all duration-300 group cursor-pointer">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/kplaylist1/400/200" alt="2023年热门K-Pop" class="w-full h-36 object-cover group-hover:scale-105 transition-transform duration-500">
                            <div class="absolute inset-0 bg-gradient-to-t from-dark to-transparent opacity-70"></div>
                            <button class="absolute bottom-3 right-3 w-10 h-10 rounded-full bg-primary flex items-center justify-center shadow-glow opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0">
                                <i class="fa fa-play text-white"></i>
                            </button>
                        </div>
                        <div class="p-3">
                            <h3 class="font-semibold">Popular K-Pop in 2023</h3>
                            <p class="text-light/60 text-sm mt-1">25 Songs • Latest Hits</p>
                        </div>
                    </div>

                    <!-- 播放列表2 -->
                    <div class="rounded-xl overflow-hidden bg-dark/60 backdrop-blur-sm border border-primary/10 hover:border-primary/40 transition-all duration-300 group cursor-pointer">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/kplaylist2/400/200" alt="K-Pop舞蹈精选" class="w-full h-36 object-cover group-hover:scale-105 transition-transform duration-500">
                            <div class="absolute inset-0 bg-gradient-to-t from-dark to-transparent opacity-70"></div>
                            <button class="absolute bottom-3 right-3 w-10 h-10 rounded-full bg-primary flex items-center justify-center shadow-glow opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0">
                                <i class="fa fa-play text-white"></i>
                            </button>
                        </div>
                        <div class="p-3">
                            <h3 class="font-semibold">K-Pop Dance Selections</h3>
                            <p class="text-light/60 text-sm mt-1">30 songs • Suitable for dancing</p>
                        </div>
                    </div>

                    <!-- 播放列表3 -->
                    <div class="rounded-xl overflow-hidden bg-dark/60 backdrop-blur-sm border border-primary/10 hover:border-primary/40 transition-all duration-300 group cursor-pointer">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/kplaylist3/400/200" alt="popular boy group songs" class="w-full h-36 object-cover group-hover:scale-105 transition-transform duration-500">
                            <div class="absolute inset-0 bg-gradient-to-t from-dark to-transparent opacity-70"></div>
                            <button class="absolute bottom-3 right-3 w-10 h-10 rounded-full bg-primary flex items-center justify-center shadow-glow opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0">
                                <i class="fa fa-play text-white"></i>
                            </button>
                        </div>
                        <div class="p-3">
                            <h3 class="font-semibold">Popular songs of boy bands</h3>
                            <p class="text-light/60 text-sm mt-1">22 songs • including BTS, EXO, etc</p>
                        </div>
                    </div>

                    <!-- 播放列表4 -->
                    <div class="rounded-xl overflow-hidden bg-dark/60 backdrop-blur-sm border border-primary/10 hover:border-primary/40 transition-all duration-300 group cursor-pointer">
                        <div class="relative">
                            <img src="https://picsum.photos/seed/kplaylist4/400/200" alt="K-Pop抒情歌曲" class="w-full h-36 object-cover group-hover:scale-105 transition-transform duration-500">
                            <div class="absolute inset-0 bg-gradient-to-t from-dark to-transparent opacity-70"></div>
                            <button class="absolute bottom-3 right-3 w-10 h-10 rounded-full bg-primary flex items-center justify-center shadow-glow opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0">
                                <i class="fa fa-play text-white"></i>
                            </button>
                        </div>
                        <div class="p-3">
                            <h3 class="font-semibold">K-Pop ballad</h3>
                            <p class="text-light/60 text-sm mt-1">18 Songs • Touching Ballads</p>
                        </div>
                    </div>

                    <div class="rounded-xl overflow-hidden bg-dark/60 backdrop-blur-sm border border-primary/10 hover:border-primary/40 transition-all duration-300 group cursor-pointer">
                        <div class="relative">
                            <!-- 初始显示占位图 -->
                            <img id="iuPlaylistImg" src="https://picsum.photos/seed/iuplaceholder/400/200" alt="IU相关内容" class="w-full h-36 object-cover group-hover:scale-105 transition-transform duration-500">
                            <div class="absolute inset-0 bg-gradient-to-t from-dark to-transparent opacity-70"></div>
                            <!-- 加载图片的按钮 -->
                            <button id="loadIuImage" class="absolute bottom-3 right-3 w-10 h-10 rounded-full bg-primary flex items-center justify-center shadow-glow opacity-100 group-hover:opacity-100 transition-opacity duration-300">
                                <i class="fa fa-download text-white"></i>
                            </button>
                        </div>
                        <div class="p-3">
                            <h3 class="font-semibold">IU's Greatest Hits</h3>
                            <p class="text-light/60 text-sm mt-1">20 Songs • Including latest releases</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 输入区域 -->
    <footer class="relative bg-neutral-dark/60 backdrop-blur-md border-t border-primary/20 p-4 z-40">
        <div class="container mx-auto">
            <div class="relative max-w-4xl mx-auto">
                <form id="chat-form" class="relative">
                    <textarea 
                        id="user-input" 
                        placeholder="Tell me your favorite K-Pop style, group or mood..." 
                        class="w-full bg-dark/60 backdrop-blur-sm border border-primary/20 rounded-full py-3 px-5 pr-16 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary resize-none transition-all duration-300 placeholder:text-light/40 min-h-[50px] max-h-[150px] overflow-y-auto scrollbar-hide"
                    ></textarea>
                    <button 
                        type="submit" 
                        class="absolute right-2 bottom-5 w-10 h-10 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center shadow-glow hover:shadow-glow-hover transition-all duration-300 transform hover:scale-105"
                    >
                        <i class="fa fa-paper-plane text-white"></i>
                    </button>
                </form>
                <div class="flex justify-center mt-3 space-x-4 text-light/50 text-sm">
                    <button class="hover:text-primary transition-colors duration-200"><i class="fa fa-microphone mr-1"></i> Language</button>
                    <button class="hover:text-primary transition-colors duration-200"><i class="fa fa-music mr-1"></i> My preferences</button>
                    <button class="hover:text-primary transition-colors duration-200"><i class="fa fa-question-circle mr-1"></i> Help</button>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // 添加图片加载功能
        document.getElementById('loadIuImage').addEventListener('click', function(e) {
            e.stopPropagation(); // 防止触发父元素的点击事件
            const imgElement = document.getElementById('iuPlaylistImg');
            const loadButton = document.getElementById('loadIuImage');

            // 显示加载状态
            loadButton.innerHTML = '<i class="fa fa-spinner fa-spin text-white"></i>';

            // 创建新图片对象预加载
            const newImg = new Image();
            newImg.src = 'https://www.nme.com/wp-content/uploads/2022/05/iu-broker-cannes-2022-Getty-Images-300522-1392x884.jpg';

            newImg.onload = function() {
                // 图片加载成功后更新img元素
                imgElement.src = newImg.src;
                imgElement.alt = 'IU at Cannes 2022';
                loadButton.innerHTML = '<i class="fa fa-check text-white"></i>';

                // 2秒后恢复播放按钮样式
                setTimeout(() => {
                    loadButton.innerHTML = '<i class="fa fa-play text-white"></i>';
                }, 2000);
            };

            newImg.onerror = function() {
                // 加载失败处理
                loadButton.innerHTML = '<i class="fa fa-times text-white"></i>';
                setTimeout(() => {
                    loadButton.innerHTML = '<i class="fa fa-download text-white"></i>';
                }, 2000);
            };
        });

        // 聊天功能实现
        document.addEventListener('DOMContentLoaded', () => {
            const chatForm = document.getElementById('chat-form');
            const userInput = document.getElementById('user-input');
            const chatMessages = document.getElementById('chat-messages');
            
            // 提交表单时发送消息
            chatForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const message = userInput.value.trim();
                
                if (message) {
                    // 添加用户消息到聊天窗口
                    addUserMessage(message);
                    
                    // 清空输入框
                    userInput.value = '';
                    
                    // 自动滚动到底部
                    scrollToBottom();
                    
                    // 模拟AI回复延迟
                    setTimeout(() => {
                        simulateAIResponse(message);
                        scrollToBottom();
                    }, 1000);
                }
            });
            
            // 添加用户消息
            function addUserMessage(message) {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'flex items-start justify-end space-x-3 opacity-0';
                messageDiv.innerHTML = `
                    <div class="bg-primary/30 backdrop-blur-sm rounded-2xl rounded-tr-none px-5 py-4 max-w-[80%] border border-primary/40">
                        <p>${message}</p>
                    </div>
                    <div class="w-9 h-9 rounded-full bg-neutral-dark/70 backdrop-blur-sm flex-shrink-0 flex items-center justify-center border border-primary/20">
                        <span class="font-medium text-sm">User</span>
                    </div>
                `;
                chatMessages.appendChild(messageDiv);
                
                // 添加淡入动画
                setTimeout(() => {
                    messageDiv.classList.add('animate-fade-in');
                    messageDiv.classList.remove('opacity-0');
                }, 10);
            }
            
            // 模拟AI回复
            function simulateAIResponse(userMessage) {
                // 先移除之前的加载状态
                const loadingElements = chatMessages.querySelectorAll('.animate-bounce');
                loadingElements.forEach(el => {
                    const parentDiv = el.closest('div[class*="flex items-start space-x-3"]');
                    if (parentDiv) parentDiv.remove();
                });
                
                // 添加加载状态
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'flex items-start space-x-3 animate-fade-in';
                loadingDiv.innerHTML = `
                    <div class="w-9 h-9 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 flex items-center justify-center shadow-glow">
                        <i class="fa fa-music text-white"></i>
                    </div>
                    <div class="bg-neutral-dark/70 backdrop-blur-sm rounded-2xl rounded-tl-none px-5 py-4 max-w-[80%] border border-primary/20">
                        <div class="flex space-x-2">
                            <div class="w-3 h-3 bg-primary rounded-full animate-bounce [animation-delay:-0.3s]"></div>
                            <div class="w-3 h-3 bg-primary rounded-full animate-bounce [animation-delay:-0.15s]"></div>
                            <div class="w-3 h-3 bg-primary rounded-full animate-bounce"></div>
                        </div>
                    </div>
                `;
                chatMessages.appendChild(loadingDiv);
                scrollToBottom();
                
                // 模拟思考时间后显示回复
                setTimeout(() => {
                    loadingDiv.remove();
                    
                    // 根据用户消息生成不同的回复
                    let aiResponse;
                    let recommendations = '';
                    const userMsgLower = userMessage.toLowerCase();
                    const hasGidleAndVideo = userMsgLower.includes('gidle') && userMsgLower.includes('video');
                    // 简单的关键词匹配来生成不同的回复
                    if (userMsgLower.includes('boy group') || userMsgLower.includes('boy group')) {
                        aiResponse = "Recommend these popular boy group songs for you：";
                        recommendations = `
                            <div class="space-y-4 mt-4">
                                <div class="bg-dark/60 backdrop-blur-sm rounded-xl p-3 border border-primary/10 hover:border-primary/40 transition-all duration-300 hover:shadow-glow/30 flex items-center gap-3 transform hover:-translate-y-1">
                                    <img src="https://picsum.photos/seed/boy1/80/80" alt="歌曲专辑封面" class="w-14 h-14 rounded-lg object-cover flex-shrink-0 border border-primary/20">
                                    <div class="flex-1 min-w-0">
                                        <h4 class="font-semibold truncate">Dynamite</h4>
                                        <p class="text-light/60 text-sm truncate">BTS</p>
                                        <div class="flex items-center mt-1 text-xs text-light/40">
                                            <span class="flex items-center"><i class="fa fa-bolt mr-1"></i> 114 BPM</span>
                                            <span class="mx-2">•</span>
                                            <span>K-Pop, Pop</span>
                                        </div>
                                    </div>
                                    <button class="w-10 h-10 rounded-full bg-primary/20 hover:bg-primary/50 flex items-center justify-center transition-colors duration-200">
                                        <i class="fa fa-play text-primary"></i>
                                    </button>
                                </div>
                                <div class="bg-dark/60 backdrop-blur-sm rounded-xl p-3 border border-primary/10 hover:border-primary/40 transition-all duration-300 hover:shadow-glow/30 flex items-center gap-3 transform hover:-translate-y-1">
                                    <img src="https://picsum.photos/seed/boy2/80/80" alt="歌曲专辑封面" class="w-14 h-14 rounded-lg object-cover flex-shrink-0 border border-primary/20">
                                    <div class="flex-1 min-w-0">
                                        <h4 class="font-semibold truncate">Love Killa</h4>
                                        <p class="text-light/60 text-sm truncate">MONSTA X</p>
                                        <div class="flex items-center mt-1 text-xs text-light/40">
                                            <span class="flex items-center"><i class="fa fa-bolt mr-1"></i> 130 BPM</span>
                                            <span class="mx-2">•</span>
                                            <span>K-Pop, Hip Hop</span>
                                        </div>
                                    </div>
                                    <button class="w-10 h-10 rounded-full bg-primary/20 hover:bg-primary/50 flex items-center justify-center transition-colors duration-200">
                                        <i class="fa fa-play text-primary"></i>
                                    </button>
                                </div>
                                <div class="bg-dark/60 backdrop-blur-sm rounded-xl p-3 border border-primary/10 hover:border-primary/40 transition-all duration-300 hover:shadow-glow/30 flex items-center gap-3 transform hover:-translate-y-1">
                                    <img src="https://picsum.photos/seed/boy3/80/80" alt="歌曲专辑封面" class="w-14 h-14 rounded-lg object-cover flex-shrink-0 border border-primary/20">
                                    <div class="flex-1 min-w-0">
                                        <h4 class="font-semibold truncate">Savage Love</h4>
                                        <p class="text-light/60 text-sm truncate">SEVENTEEN</p>
                                        <div class="flex items-center mt-1 text-xs text-light/40">
                                            <span class="flex items-center"><i class="fa fa-bolt mr-1"></i> 125 BPM</span>
                                            <span class="mx-2">•</span>
                                            <span>K-Pop, Dance</span>
                                        </div>
                                    </div>
                                    <button class="w-10 h-10 rounded-full bg-primary/20 hover:bg-primary/50 flex items-center justify-center transition-colors duration-200">
                                        <i class="fa fa-play text-primary"></i>
                                    </button>
                                </div>
                            </div>
                        `;
                                            // 创建AI回复元素
                    const aiMessageDiv = document.createElement('div');
                    aiMessageDiv.className = 'flex items-start space-x-3 opacity-0';
                    aiMessageDiv.innerHTML = `
                        <div class="w-9 h-9 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 flex items-center justify-center shadow-glow">
                            <i class="fa fa-music text-white"></i>
                        </div>
                        <div class="bg-neutral-dark/70 backdrop-blur-sm rounded-2xl rounded-tl-none px-5 py-4 max-w-[80%] border border-primary/20">
                            <p class="mb-4">${aiResponse}</p>
                            ${recommendations}
                            <p class="mt-4 text-light/70">Need any other kpop recommendation？</p>
                        </div>
                    `;
                    chatMessages.appendChild(aiMessageDiv);

                    // 添加淡入动画
                    setTimeout(() => {
                        aiMessageDiv.classList.add('animate-fade-in');
                        aiMessageDiv.classList.remove('opacity-0');
                    }, 10);
                    } else if (userMsgLower.includes('girl group') || userMsgLower.includes('girl group')) {
                        aiResponse = "Recommend these popular girl group songs for you:";
                        recommendations = `
                            <div class="space-y-4 mt-4">
                                <div class="bg-dark/60 backdrop-blur-sm rounded-xl p-3 border border-primary/10 hover:border-primary/40 transition-all duration-300 hover:shadow-glow/30 flex items-center gap-3 transform hover:-translate-y-1">
                                    <img src="https://picsum.photos/seed/girl1/80/80" alt="歌曲专辑封面" class="w-14 h-14 rounded-lg object-cover flex-shrink-0 border border-primary/20">
                                    <div class="flex-1 min-w-0">
                                        <h4 class="font-semibold truncate">Next Level</h4>
                                        <p class="text-light/60 text-sm truncate">aespa</p>
                                        <div class="flex items-center mt-1 text-xs text-light/40">
                                            <span class="flex items-center"><i class="fa fa-bolt mr-1"></i> 128 BPM</span>
                                            <span class="mx-2">•</span>
                                            <span>K-Pop, EDM</span>
                                        </div>
                                    </div>
                                    <button class="w-10 h-10 rounded-full bg-primary/20 hover:bg-primary/50 flex items-center justify-center transition-colors duration-200">
                                        <i class="fa fa-play text-primary"></i>
                                    </button>
                                </div>
                                <div class="bg-dark/60 backdrop-blur-sm rounded-xl p-3 border border-primary/10 hover:border-primary/40 transition-all duration-300 hover:shadow-glow/30 flex items-center gap-3 transform hover:-translate-y-1">
                                    <img src="https://picsum.photos/seed/girl2/80/80" alt="歌曲专辑封面" class="w-14 h-14 rounded-lg object-cover flex-shrink-0 border border-primary/20">
                                    <div class="flex-1 min-w-0">
                                        <h4 class="font-semibold truncate">After Like</h4>
                                        <p class="text-light/60 text-sm truncate">IVE</p>
                                        <div class="flex items-center mt-1 text-xs text-light/40">
                                            <span class="flex items-center"><i class="fa fa-bolt mr-1"></i> 126 BPM</span>
                                            <span class="mx-2">•</span>
                                            <span>K-Pop, Disco</span>
                                        </div>
                                    </div>
                                    <button class="w-10 h-10 rounded-full bg-primary/20 hover:bg-primary/50 flex items-center justify-center transition-colors duration-200">
                                        <i class="fa fa-play text-primary"></i>
                                    </button>
                                </div>
                            </div>
                        `;

                                            // 创建AI回复元素
                    const aiMessageDiv = document.createElement('div');
                    aiMessageDiv.className = 'flex items-start space-x-3 opacity-0';
                    aiMessageDiv.innerHTML = `
                        <div class="w-9 h-9 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 flex items-center justify-center shadow-glow">
                            <i class="fa fa-music text-white"></i>
                        </div>
                        <div class="bg-neutral-dark/70 backdrop-blur-sm rounded-2xl rounded-tl-none px-5 py-4 max-w-[80%] border border-primary/20">
                            <p class="mb-4">${aiResponse}</p>
                            ${recommendations}
                            <p class="mt-4 text-light/70">Need any other kpop music？</p>
                        </div>
                    `;
                    chatMessages.appendChild(aiMessageDiv);

                    // 添加淡入动画
                    setTimeout(() => {
                        aiMessageDiv.classList.add('animate-fade-in');
                        aiMessageDiv.classList.remove('opacity-0');
                    }, 10);
                    }
                    else if (hasGidleAndVideo) {
    // 处理包含gidle和视频的请求
    setTimeout(() => {
        loadingDiv.remove();

        // 1. 定义视频目录和文件列表（根据实际情况修改）
        const videoDir = './video/gidle'; // 视频存放目录
        const videoFiles = [
            'fate.mp4',
            'gidle2.mp4',
            'gidle-performance.mp4',
            'gidle-stage.mp4' // 可添加更多视频文件名
        ];

        // 2. 随机选择一个视频
        const randomVideo = videoFiles[Math.floor(Math.random() * videoFiles.length)];
        const videoUrl = `${videoDir}${randomVideo}`; // 拼接完整路径

        let aiResponse = "为你找到(G)I-DLE的相关视频：";
        // 3. 视频播放组件 - 使用随机选中的视频路径
        let videoContent = `
            <div class="mt-4 mb-3">
                <video controls class="w-full rounded-lg border border-primary/30" poster="https://picsum.photos/seed/gidle/800/450">
                    <source src="${videoUrl}" type="video/mp4">
                    你的浏览器不支持视频播放
                 </video>
            </div>
        `;

        // 创建AI回复元素（保持不变）
        const aiMessageDiv = document.createElement('div');
        aiMessageDiv.className = 'flex items-start space-x-3 opacity-0';
        aiMessageDiv.innerHTML = `
            <div class="w-9 h-9 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 flex items-center justify-center shadow-glow">
                <i class="fa fa-music text-white"></i>
            </div>
            <div class="bg-neutral-dark/70 backdrop-blur-sm rounded-2xl rounded-tl-none px-5 py-4 max-w-[80%] border border-primary/20">
                <p class="mb-4">${aiResponse}</p>
                ${videoContent}
                <p class="mt-2 text-light/70">Need any other video recommendation?</p>
            </div>
        `;
        chatMessages.appendChild(aiMessageDiv);

        setTimeout(() => {
            aiMessageDiv.classList.add('animate-fade-in');
            aiMessageDiv.classList.remove('opacity-0');
        }, 10);
        scrollToBottom();
    }, 1500);
}
                    else {
        // 其他情况调用后端LLM服务
        fetch('http://localhost:7899/api/llm', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ prompt: userMessage })
        })
        .then(response => {
            if (!response.ok) throw new Error('网络错误');
            return response.json();
        })
        .then(data => {
            loadingDiv.remove();

            // 使用LLM返回的结果
            let aiResponse = data.response.replace(/\r?\n/g, '<br>') || "根据你的喜好，为你推荐以下K-Pop音乐：";
            let recommendations = `
                    <div>
                    </div>
                `;

            // 如果LLM没有返回推荐，使用默认推荐
            if (!recommendations) {
                recommendations = `
                    <div>
                    </div>
                `;
            }

            // 创建AI回复元素
            const aiMessageDiv = document.createElement('div');
            aiMessageDiv.className = 'flex items-start space-x-3 opacity-0';
            aiMessageDiv.innerHTML = `
                <div class="w-9 h-9 rounded-full bg-gradient-to-r from-primary to-secondary flex-shrink-0 flex items-center justify-center shadow-glow">
                    <i class="fa fa-music text-white"></i>
                </div>
                <div class="bg-neutral-dark/70 backdrop-blur-sm rounded-2xl rounded-tl-none px-5 py-4 max-w-[80%] border border-primary/20">
                    <p class="mb-4">${aiResponse}</p>
                    ${recommendations}
                    <p class="mt-4 text-light/70">Need any other kpop music？</p>
                </div>
            `;
            chatMessages.appendChild(aiMessageDiv);

            setTimeout(() => {
                aiMessageDiv.classList.add('animate-fade-in');
                aiMessageDiv.classList.remove('opacity-0');
            }, 10);
            scrollToBottom();
        })
        .catch(error => {
            console.error('LLM请求失败:', error);
            loadingDiv.remove();

            // 错误处理
            const errorDiv = document.createElement('div');
            errorDiv.className = 'flex items-start space-x-3 animate-fade-in';
            errorDiv.innerHTML = `
                <div class="w-9 h-9 rounded-full ...">
                    <i class="fa fa-music text-white"></i>
                </div>
                <div class="bg-neutral-dark/70 ...">
                    <p>抱歉，获取推荐时出现错误，请稍后再试。</p>
                </div>
            `;
            chatMessages.appendChild(errorDiv);
            scrollToBottom();
        });
    }
                    

                    
                    scrollToBottom();
                }, 2000);
            }
            
            // 滚动到聊天底部
            function scrollToBottom() {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            // 初始滚动到底部
            scrollToBottom();
            
            // 添加动画关键帧
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in {
                    animation: fadeIn 0.3s ease-out forwards;
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>
